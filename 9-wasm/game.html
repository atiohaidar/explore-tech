<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic-Tac-Toe dengan WASM</title>
    <style>
        table { border-collapse: collapse; margin: 20px auto; }
        td { width: 60px; height: 60px; border: 1px solid #000; text-align: center; font-size: 24px; cursor: pointer; }
        button { display: block; margin: 20px auto; }
    </style>
</head>
<body>
    <h1>Tic-Tac-Toe Sederhana dengan WebAssembly</h1>
    <table id="board">
        <tr>
            <td onclick="cellClick(0,0)"></td>
            <td onclick="cellClick(0,1)"></td>
            <td onclick="cellClick(0,2)"></td>
        </tr>
        <tr>
            <td onclick="cellClick(1,0)"></td>
            <td onclick="cellClick(1,1)"></td>
            <td onclick="cellClick(1,2)"></td>
        </tr>
        <tr>
            <td onclick="cellClick(2,0)"></td>
            <td onclick="cellClick(2,1)"></td>
            <td onclick="cellClick(2,2)"></td>
        </tr>
    </table>
    <button onclick="resetGame()">Reset Game</button>
    <div id="status"></div>

    <script src="wasm_exec.js"></script>
    <script>
        let go;

        async function initWasm() {
            go = new Go();
            const response = await fetch('game.wasm');
            const buffer = await response.arrayBuffer();
            const result = await WebAssembly.instantiate(buffer, go.importObject);
            go.run(result.instance);
        }

        function cellClick(row, col) {
            const symbol = makeMove(row, col);
            if (symbol !== "") {
                document.getElementById('board').rows[row].cells[col].innerText = symbol;
                const winner = checkWinner();
                if (winner !== "") {
                    document.getElementById('status').innerText = `Pemenang: ${winner}`;
                }
            }
        }

        function resetGame() {
            resetGame();
            const cells = document.querySelectorAll('td');
            cells.forEach(cell => cell.innerText = '');
            document.getElementById('status').innerText = '';
        }

        initWasm();
    </script>
</body>
</html>